# Замечания по ЛР №1

**Задание**: закодить 3D-Viewer для каркасной модели. Модель задаешь как хочешь, я задавал в файле списком точек и списком ребер. 
Нужно уметь эту модель в программе поворачивать, переносить, масштабировать, выгружать из файла и сохранять в новый файл. 
Перспектива необязательна, можно проецировать ортогонально, как я собственно и сделал.

Для графики можно юзать классы, но код с реализацией логики - строго структурное программирование и строго одна точка входа, 
которая вызывается из разных точек интерфейса. Тассову нужен красивый код, забанит за два и больше выходов из цикла. Саму программу даже может не запустить, но 
код проверит обязательно.

Кодил в QT Creator, потом попытался перевести все в привычную структуру проекта и скомпилировать через тот же самый make-файл в VS Code, но тут 
компилятор начал ругаться на какие-то deprecated записи в файлах самой библиотеки QT. Видимо, какие-то флаги стоит снять во время компиляции, но мне было некогда 
и честно лень с этим разбираться, поэтому работает все это только в QT (правда не с той структурой проекта, которая лежит в репозитории xD).


**UPD_1. 13.03.2021**: Первая попытка сдачи 12 марта. Тассов сказал - все плохо (хотя обычно шутки про индусский, украинский и далее по списку код, помойку, бандитизм в коде и так далее - поэтому вдвойне обидно, хотя может и к лучшему). Посмотрел только входную первую функцию, дальше даже не стал углубляться.

Руководствуемся тремя правилами:
- "Всегда думай о главном" (первые два по сути об одном и том же - о декомпозиции)
- "Разделяй и властвуй" (реально, меня уже бесят эти вонючие цитаты, но что поделац)
- "Полное недоверие к внешнему" (проверяем все на входе у каждой функции, если можно это проверить)

В общем, в главной функции "я уже погружаю человека в подробности, которые ему неинтересны", в то время как по сути ничего кроме объявления модели и условно говоря *switch* ничего не должно быть. Все декомпозируем по максимуму (вот сейчас исправил, и то не факт что додекомпозировано все до конца).

На интерфейсную часть Тассову глубоко пофиг, прогу не запускает.

Большое спасибо другу из группы (чей ник в github я не знаю кстати, лол) за то, что сказал еще, что Тассов скорее всего забанит за использование `va_list` и инициализацию `static model_t model = {0}` - в С++ такое не работает, нужна функция для инициализации.

Перед функцией process пока закомменчено то, что стоит еще сделать и проверить, но на момент написания этой части readme я очень устал уже с этим возиться, так что в другой раз. (**UPD 16.03.2021** - доделал, надеюсь, что это Тассову понравится)

В общем, готовьтесь, с первого раза вы скорее всего не сдадите (пока из знакомых только один такой уникум).

**UPD 19.03.2021**: Тассов сгорел с выделения памяти - если функция захватила ресурс и что-то потом в ней пошло не так - ОНА это освобождает. И обработка ошибок с памятью должна быть на более низких уровнях абстракции (ну, например, функция f вызывает две функции - чтение точек и чтение связей, если в связях что-то пошло не так, то массив связей освободить в связях, а массив точек в этой функции f).
Еще ошибка - если модель model уже загружена, то ее рано освобождать сразу же при вызове функции чтения новой: новую модель прочитать нужно в temp а потом, если чтение успешно, уже освободить старую и присвоить model = temp

На самом деле тут я сгорел с Тассова, потому что он дальше чтения тупо смотреть не стал и сказал переделывать, хотя там работы на 10 минут.

**UPD: 26.03.2021**: Тассов любит убегать с нашей пары чуть ли не за 30-40 минут до конца. Так было и в этот раз. Причем очередь остановилась именно на мне, так что я рисковал остаться без сданной лабы опять. В итоге сказал, что мне всего лишь показать исправления и это на пару минут. Показал исправленную функцию чтения и Тассов принял лабу на 9 баллов. Но это рискованный лайфхак, больше не буду так делать.

В общем, всем удачи. В зависимости от настроения, Тассов может принять и с первого раза, как это было с несколькими ребятами из группы.
